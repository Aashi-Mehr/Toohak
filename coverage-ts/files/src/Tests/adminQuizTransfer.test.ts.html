
  <!DOCTYPE html>
  <html>
    <head>
      <title>adminQuizTransfer.test.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/Tests/adminQuizTransfer.test.ts</td><td class="">88.19%</td><td class="">80%</td><td class="">127</td><td class="">112</td><td class="">15</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import {
  requestClear,
  requestRegister,
  requestQuizCreate,
  requestQuizInfo,
  requestQuizTransfer
} from &#x27;./testHelper&#x27;;

/// ////////////////////////////////////////////////////////////////////////////
/// //////////////////////////////// Tests /////////////////////////////////////
/// ////////////////////////////////////////////////////////////////////////////

const ERROR = { error: expect.any(String) };
const invalidUser = -10000;
const quizId = -214213;
const email1 = &#x27;first.last1@gmail.com&#x27;;
const email2 = &#x27;first.last2@gmail.com&#x27;;

beforeEach(() =&gt; {
  requestClear();
});

describe(&#x27;requestQuizTransfer&#x27;, () =&gt; {
  let token1: number;
  let token2: number;
  let quizId1: number;

  beforeEach(() =&gt; {
    token1 = requestRegister(email1, &#x27;abcd1234&#x27;, &#x27;first&#x27;, &#x27;last&#x27;).token;
    token2 = requestRegister(email2, &#x27;abcd1234&#x27;, &#x27;first&#x27;, &#x27;last&#x27;).token;
    quizId1 = requestQuizCreate(token1, &#x27;first last&#x27;, &#x27;fist_test&#x27;).quizId;
  });

  describe(&#x27;ERROR Tests&#x27;, () =&gt; {
    test(&#x27;token is not a valid user&#x27;, () =&gt; {
      // token is not an integer
      const result = requestQuizTransfer(invalidUser, quizId1, email2);
      expect(result).toMatchObject(ERROR);
    });

    test(&#x27;Quiz ID does not refer to a valid quiz&#x27;, () =&gt; {
      const result = requestQuizTransfer(token1, quizId, email2);

      expect(result).toMatchObject(ERROR);
    });

    test(&#x27;Quiz ID does not refer to a quiz that this user owns&#x27;, () =&gt; {
      const quizId2 = requestQuizCreate(token2, &#x27;first last&#x27;, &#x27;fist_test&#x27;).quizId;

      const result = requestQuizTransfer(token1, quizId2, email2);

      expect(result).toMatchObject(ERROR);
    });

    test(&#x27;userEmail is not a real user&#x27;, () =&gt; {
      const result = requestQuizTransfer(token1, quizId1, &#x27;invalid@gmail.com&#x27;);
      expect(result).toMatchObject(ERROR);
    });

    test(&#x27;userEmail is the current logged in user&#x27;, () =&gt; {
      const result = requestQuizTransfer(token1, quizId1, email1);
      expect(result).toMatchObject(ERROR);
    });

    test(&#x27;Quiz ID refers to a quiz that has a name that is already used by the target user&#x27;, () =&gt; {
      requestQuizCreate(token2, &#x27;first last&#x27;, &#x27;fist_test&#x27;);
      const result = requestQuizTransfer(token1, quizId1, email2);
      expect(result).toMatchObject(ERROR);
    });
  });

  describe(&#x27;VALID Tests&#x27;, () =&gt; {
    test(&#x27;successful case&#x27;, () =&gt; {
      const result = requestQuizTransfer(token1, quizId1, email2);
      expect(result).toMatchObject({});
    });

    test(&#x27;successful transferred&#x27;, () =&gt; {
      requestQuizTransfer(token1, quizId1, email2);
      expect(requestQuizInfo(token1, quizId1)).toMatchObject(ERROR);
      expect(requestQuizInfo(token2, quizId1)).not.toMatchObject(ERROR);
    });
  });
});
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:12,&quot;character&quot;:16,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:36,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:37,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:41,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:43,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:51,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:55,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:56,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:60,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:66,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:67,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:73,&quot;character&quot;:12,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/Tests/adminQuizTransfer.test.ts&quot;,&quot;line&quot;:74,&quot;character&quot;:13,&quot;text&quot;:&quot;result&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Wed, 01 Nov 2023 00:14:18 GMT</p>
    </body>
  </html>
  